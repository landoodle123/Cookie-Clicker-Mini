<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ultimate Clicker Deluxe</title>
<style>
  body { font-family: 'Segoe UI', sans-serif; margin: 0; background: linear-gradient(to bottom, #6dd5ed, #2193b0); color: #fff; }
  header { position: sticky; top: 0; background: rgba(0,0,0,0.4); padding: 15px; font-size: 24px; text-align: center; font-weight: bold; }
  #gameArea { display: flex; justify-content: space-around; flex-wrap: wrap; padding: 20px; }
  #clickArea { flex: 1; min-width: 250px; text-align: center; margin-bottom: 30px; }
  .click-button { font-size: 28px; padding: 20px 40px; border: none; border-radius: 50px; background: #ff9800; color: white; cursor: pointer; transition: transform 0.1s; }
  .click-button:hover { transform: scale(1.05); background: #ffa726; }
  #info { margin-top: 10px; font-size: 18px; }
  #prestigeInfo { margin-top: 15px; font-size: 18px; font-weight: bold; }
  #prestigeBtn { display: none; background-color: #d2691e; margin-top: 10px; border: none; padding: 8px 20px; border-radius: 8px; color: white; cursor: pointer; }
  #gameButtons { margin-top: 15px; }
  #gameButtons button { margin: 5px; border-radius: 8px; border: none; padding: 8px 20px; cursor: pointer; }
  #shop { flex: 1; min-width: 300px; display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px; }
  .shop-item { background: rgba(255,255,255,0.1); border-radius: 12px; padding: 15px; text-align: center; transition: background 0.2s; }
  .shop-item.affordable { background: rgba(0,255,0,0.15); }
  .shop-item h3 { margin: 0; }
  .shop-item button { margin-top: 8px; width: 100%; padding: 6px; background: #00bcd4; color: white; border: none; border-radius: 8px; cursor: pointer; }
  .shop-item button:hover { background: #26c6da; }
  .float-text { position: absolute; font-size: 20px; color: yellow; font-weight: bold; animation: floatUp 1s ease-out forwards; pointer-events: none; }
  @keyframes floatUp { 0% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-50px); } }

  .golden-cookie { position: absolute; width: 50px; height: 50px; background: gold; border-radius: 50%; border: 3px solid #daa520; cursor: pointer; animation: popIn 0.3s ease-out; box-shadow: 0 0 15px rgba(255,215,0,0.7); }
  .mega-cookie { width: 80px !important; height: 80px !important; background: orange !important; box-shadow: 0 0 25px rgba(255,140,0,0.9) !important; border-color: #ff8c00 !important; }
  @keyframes popIn { from { transform: scale(0); } to { transform: scale(1); } }

  #adminBtn { position: fixed; bottom: 10px; right: 10px; background: rgba(0,0,0,0.5); color: white; padding: 6px 10px; border-radius: 6px; font-size: 12px; cursor: pointer; z-index: 20000; }
  #adminPanel { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,0,0,0.85); padding: 20px; border-radius: 12px; z-index: 20001; color: white; text-align: center; width: 300px; }
  #adminPanel button { display: block; width: 100%; margin: 8px 0; padding: 8px; border-radius: 6px; border: none; background: #00bcd4; color: white; cursor: pointer; }
  #adminPanel button:hover { background: #26c6da; }
  #wipeBtn { background: red !important; animation: flash 1s infinite; }
  @keyframes flash { 0%, 100% { background: red; } 50% { background: darkred; } }
</style>
</head>
<body>

<header id="score">Score: 0</header>
<div id="gameArea">
  <div id="clickArea">
    <button class="click-button" onclick="clickButton(event)">Click Me!</button>
    <p id="info">Points per click: 1 | Points per second: 0</p>
    <div id="prestigeInfo">Prestige Points: 0 | Multiplier: 1.00x</div>
    <div id="gameButtons">
      <button id="prestigeBtn" onclick="prestige()">Prestige Reset</button>
    </div>
  </div>
  <div id="shop"></div>
</div>

<div id="adminBtn" onclick="adminLogin()">Admin</div>
<div id="adminPanel">
  <h3>Admin Panel</h3>
  <button onclick="addScore(10000)">+10,000 Score</button>
  <button onclick="addPrestige(10)">+10 Prestige</button>
  <button onclick="unlockAll()">Unlock All Items</button>
  <button onclick="spawnGoldenCookie(false)">Spawn Golden Cookie</button>
  <button onclick="spawnGoldenCookie(true)">Spawn Mega Golden Cookie</button>
  <button id="wipeBtn" onclick="wipeSave()">Wipe Save / Reset Game</button>
  <button onclick="closeAdmin()">Close</button>
</div>

<script>
let score = 0;
let basePointsPerClick = 1;
let pointsPerClick = 1;
let prestigePoints = 0;
let prestigeMultiplier = 1;
let prestigeThreshold = 1000000;

let shopItems = [
  { name: "Cursor", baseCost: 15, cost: 15, amount: 0, cps: 0.1 },
  { name: "Grandma", baseCost: 100, cost: 100, amount: 0, cps: 1 },
  { name: "Farm", baseCost: 500, cost: 500, amount: 0, cps: 5 },
  { name: "Factory", baseCost: 2000, cost: 2000, amount: 0, cps: 20 },
  { name: "Bank", baseCost: 10000, cost: 10000, amount: 0, cps: 100 },
  { name: "Mine", baseCost: 50000, cost: 50000, amount: 0, cps: 500 },
  { name: "Temple", baseCost: 200000, cost: 200000, amount: 0, cps: 2000 },
  { name: "Wizard Tower", baseCost: 1000000, cost: 1000000, amount: 0, cps: 10000 },
  { name: "Portal", baseCost: 10000000, cost: 10000000, amount: 0, cps: 100000 },
  { name: "Time Machine", baseCost: 50000000, cost: 50000000, amount: 0, cps: 500000 },
  { name: "Antimatter Condenser", baseCost: 250000000, cost: 250000000, amount: 0, cps: 2500000 }
];

function saveGame() {
  localStorage.setItem("clickerSave", JSON.stringify({score, basePointsPerClick, pointsPerClick, prestigePoints, prestigeMultiplier, shopItems}));
}
function loadGame() {
  const data = JSON.parse(localStorage.getItem("clickerSave"));
  if(data){
    score = data.score;
    basePointsPerClick = data.basePointsPerClick;
    pointsPerClick = data.pointsPerClick;
    prestigePoints = data.prestigePoints;
    prestigeMultiplier = data.prestigeMultiplier;
    shopItems = data.shopItems;
  }
}

function updateDisplay() {
  const cps = shopItems.reduce((sum, i) => sum + i.cps * i.amount, 0);
  document.getElementById("score").innerText = `Score: ${Math.floor(score)}`;
  document.getElementById("info").innerText = `Points per click: ${pointsPerClick} | Points per second: ${cps.toFixed(1)}`;
  document.getElementById("prestigeInfo").innerText = `Prestige Points: ${prestigePoints} | Multiplier: ${prestigeMultiplier.toFixed(2)}x`;
  document.getElementById("prestigeBtn").style.display = score >= prestigeThreshold ? "inline-block" : "none";
  renderShop();
}

function clickButton(e) {
  score += pointsPerClick;
  createFloatingText(`+${pointsPerClick}`, e.clientX, e.clientY);
  updateDisplay();
}

function createFloatingText(text, x, y) {
  const el = document.createElement("div");
  el.innerText = text;
  el.className = "float-text";
  el.style.left = x + "px";
  el.style.top = y + "px";
  document.body.appendChild(el);
  setTimeout(() => el.remove(), 1000);
}

function renderShop() {
  const shopDiv = document.getElementById("shop");
  shopDiv.innerHTML = "";
  shopItems.forEach((item, idx) => {
    const div = document.createElement("div");
    div.className = "shop-item";
    if(score >= item.cost) div.classList.add("affordable");
    div.innerHTML = `
      <h3>${item.name}</h3>
      <p>Owned: ${item.amount}</p>
      <p>Cost: ${Math.floor(item.cost)}</p>
      <p>CPS: ${item.cps}</p>
      <button onclick="buyItem(${idx})">Buy</button>
    `;
    shopDiv.appendChild(div);
  });
}

function buyItem(i) {
  let item = shopItems[i];
  if(score >= item.cost){
    score -= item.cost;
    item.amount++;
    item.cost = Math.floor(item.baseCost * Math.pow(1.15, item.amount));
    pointsPerClick = Math.floor(basePointsPerClick * prestigeMultiplier);
    updateDisplay();
  }
}

function prestige() {
  if(score >= prestigeThreshold) {
    prestigePoints += Math.floor(score / prestigeThreshold);
    prestigeMultiplier = 1 + prestigePoints * 0.1;
    score = 0;
    basePointsPerClick = 1;
    pointsPerClick = 1;
    shopItems.forEach(i => { i.amount = 0; i.cost = i.baseCost; });
    updateDisplay();
  }
}


const ADMIN_HASH = "38799e7710b8479194fcedc7dbe700b365358d5d70bbdf0ad028843583e8c428";

async function adminLogin() {
  const pass = prompt("Enter admin password:");
  if (!pass) return;
  // Hash the input
  const encoder = new TextEncoder();
  const data = encoder.encode(pass);
  const hashBuffer = await crypto.subtle.digest("SHA-256", data);
  const hashArray = Array.from(new Uint8Array(hashBuffer));
  const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
  if (hashHex === ADMIN_HASH) {
    document.getElementById("adminPanel").style.display = "block";
  } else {
    alert("Wrong password");
  }
}

function closeAdmin() {
  document.getElementById("adminPanel").style.display = "none";
}

function addScore(a) {
  score += a;
  updateDisplay();
}

function addPrestige(a) {
  prestigePoints += a;
  updateDisplay();
}

function unlockAll() {
  shopItems.forEach(i => i.amount = 10);
  updateDisplay();
}

function wipeSave() {
  if(confirm("Wipe all progress?")) {
    localStorage.removeItem("clickerSave");
    location.reload();
  }
}

function spawnGoldenCookie(mega = false) {
  const gc = document.createElement("div");
  gc.className = "golden-cookie";
  if(mega) gc.classList.add("mega-cookie");
  let x = Math.random() * (window.innerWidth - 100);
  let y = Math.random() * (window.innerHeight - 200) + 100;
  gc.style.left = x + "px";
  gc.style.top = y + "px";
  document.body.appendChild(gc);
  gc.onclick = () => {
    let bonus = Math.max(100, pointsPerClick * 5);
    if(mega) bonus *= 10;
    score += bonus;
    createFloatingText("+" + bonus + (mega ? " MEGA!" : ""), x + 25, y);
    gc.remove();
    updateDisplay();
  };
  setTimeout(() => gc.remove(), 5000);
}

setInterval(() => {
  score += shopItems.reduce((sum, i) => sum + i.cps * i.amount, 0) / 10;
  updateDisplay();
}, 100);

setInterval(() => {
  saveGame();
}, 5000);

setInterval(() => {
  if(Math.random() < 0.1) spawnGoldenCookie(false);
}, 10000);

loadGame();
updateDisplay();
</script>
</body>
</html>
